# sql

### 1단원 - 데이터 모델링의 이해

## 스키마

1. 스키마란

   데이터 베이스의 구조와 제약조건에 관해 전반적인 명세를 기술한 것

   속성 (Attribute) : 개체의 특성을 나타내는 것

   개체 (Entity) :  속성들의 집합으로 이루어진 것

   관계 (Relation) : 개체 사이에 존재하는 관계

2. 스키마의 종류

- 개념 스키마 = 전체적인 뷰
  - 데이터 베이스의 전체적인 논리적 구조
  - 데이터 베이스에 실제로 어떤 데이터가 저장되었으며 데이터간의 관계는 어떻게 되는가
  - 개체간의 관계와 제약조건 명시
  - DBA에 의해 구성
  - 데이터 베이스당 하나만 존재
- 내부 스키마 = 물리적인 저장장치 입장에서 DB가 저장되는 방법을 기술한 것
  - 개념 스키마를 디스크 기억장치에 물리적으로 구현하기 위해 기술한 것
  - 실제로 저장될 내부레코드 형식, 내부레코드의 물리적 순서, 인덱스의 유/무 등에 관한것
  - DB는 내부 스키마에 의해서 곧바로 구현되는 것이 아니라, 내부 스키마에 기술한 내용에 따라 운영체제의 파일 시스템에 의해 물리적 저장장치에 기록된다.
  - 시스템 프로그래머나 시스템 설계자가 보는 관점의 스키마
- 외부 스키마 = 서브 스키마 - 사용자 뷰
  - 사용자가 응용 프로그래머가 개인의 입장에서 필요한 데이터 베이스의 논리적 구조를 정의
  - 실세계에 존재하는 데이터들을 어떤 형식, 구조, 배치 화면을 통해 사용자에게 보여줄 것인지
  - 하나의 데이터베이스에는 여러 개의 외부 스키마가 존재 가능
  - 하나의 외부 스키마를 여러 개의 응용 프로그램이나 사용자가 공용 가능

## ERD

- 1976년 피터첸에 의해 Entity-Relationship-Model이라는 표기법이 만들어졌다.
- 일반적으로 ERD를 작성하는 방법은 엔터티 도출→엔터티 배치→관계 설정→관계명 기술의 흐름으로 작업을 진행한다.
- 관계의 명칭은 관계 표현에 있어서 매우 중요한 부분에 해당한다.
- 가장 중요한 엔터티는 왼쪽 상단에 배치하고, 이것을 중심으로 다른 엔터티를 나열하면서 전개한다.

## 엔터티

- 반드시 해당 업무에서 필요하고 관리하고자 하는 정보이어야 한다.
- 유일한 식별자에 의해 식별이 가능해야 한다.
- 영속적으로 존재하는 두 개 이상의 **인스턴스**의 집합이어야 한다.
  - 여기서 인스턴스는 record라고 보면 된다.
- 엔터티는 업무 프로세스에 의해 이용되어야 한다.
- 엔터티는 반드시 속성이 있어야 한다.
- 엔터티는 다른 엔터티와 최소 한 개 이상의 관계가 있어야 한다.

## 기본 엔터티

- 기본엔터티란 그 **업무에 원래 존재하는 정보**로서 **다른 엔터티와의 관계에 의해 생성되지 않고 독립적으로 생성이 가능**하고 자신은 **타 엔터티의 부모의 역할**을 하게 된다.
- 다른 엔터티로부터 주식별자를 상속받지 않고 **자신의 고유한 주식별자를 가지게 된다**.

## 속성

- **기본속성** 사원이름, 직책이름, 고용일자 등 가장 일반적인 속성
- **설계속성** 업무상 필요한 데이터 외에 데이터 모델링을 위해, 업무를 규칙화하기 위해 속성을 새로 만들거나 변형하여 정의하는 속성 **ex) 부서번호**
- **파생속성** 다른 속성에 영향을 받아 발생하는 속성으로, 계산된 값들이 여기에 해당한다. 다른 속성에 영향을 받으므로 영향받는 속성을 알아두어야 하는 등 유의할 점이 많아서 가급적 적게 정의하는 것이 좋다.

## 도메인

- 각 속성이 가질 수 있는 값의 범위
- 엔터티 내에서 속성에 대한 데이터 타입과 크기 그리고 제약사항을 지정하는 것이다.

## 관계

**관계의 분류**

- 존재에 의한 관계 ex) 부서와 사원
- 행위에 의한 관계 ex) 고객과 주문

**관계의 표기법**

- 관계명: 관계의 이름
- 관계 차수: 1:1, 1:M, M:N
- 관계 선택사양: 필수 관계, 선택 관계

**관계 체크사항**

- 두 개의 엔터티 사이에 관심있는 연관규칙이 존재하는가?
- 두 개의 엔터티 사이에 정보의 조합이 발생하는가?
- 업무기술서, 장표에 관계연결에 대한 규칙이 서술되어 있는가?
- 업무기술서, 장표에 관계연결을 가능하게 하는 동사가 있는가?

## 식별자

**식별자의 유형**

- 주식별자/보조식별자 → 대표성 여부
- 내부식별자/외부식별자 → 스스로 생성 여부
  자신의 엔티티 내에서 스스로 생성되어 존재하는 식별자를 내부 식별자라고 한다.
  다른 엔티티로부터 관계에 의해 주식별자 속성을 상속받아 자신의 속성에 포함되는 식별자를 외부 식별자라고 한다. 
  **외부식별자는 FK를 의미**한다.
- 단일식별자/복합식별자 → 단일 속성 여부
  주식별자의 구성이 한 가지 속성으로 이루어진 경우를 단일 식별자, 두 개 이상의 속성으로 구성된 경우를 복합식별자라 한다.

**식별자 관계와 비식별자 관계**

- 식별자 관계
  - 강한 연결관계 표현
  - 자식 주식별자의 구성에 포함됨
  - 실선 표현
  - 반드시 부모엔터티 종속
  - 자식 주식별자구성에 부모 주식별자포함 필요
  - **상속받은 주식별자속성을 타엔터티에 이전 필요 →**
- 비식별자 관계
  - 약한 연결관계 표현
  - 자식 일반 속성에 포함됨
  - 점선 표현
  - 약한 종속 관계
  - 자식 주식별자구성을 독립적으로 구성
  - 자식 주식별자구성에 부모 주식별자 부분 필요
  - **상속받은 주식별자 속성을 타엔터티에 차단 필요 →**
  - **부모쪽의 관계참여가 선택관계 →**